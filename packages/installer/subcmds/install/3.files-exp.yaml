# The possible values of `mode`: (by default `sync`)
# - `sync`: Make the destination completely the same as the source.
# - `soft`: Skip existing files when copying
# - `hard`: Overwrite existing files when copying
# - `soft-backup`: If target file exists, copy source file to `*.new`. Do not create `*.new` but skip coyping when source and target HASH values are exactly the same.
# - `hard-backup`: If target file exists, create backup by renaming it to `*.old.<n>` where `<n>` is a number increment from 1 to prevent backup gets overwritten when running twice. (Keep in mind that this script must be idempotent.) Also must compare the actual file content by using MD5 HASH value to prevent generating lots of `*.old.<n>`s when runnng multiple times. Do not create backup but skip coyping when source and target HASH values are exactly the same.
# - `skip`: Skip this step
# - `skip-if-exists`: Skip this step if target exists
version: "1.0"
user_preferences:
  shell: "fish" # fish | zsh
  terminal: "foot" # kitty | foot
  keybindings: "default" # default | vim
patterns:
  # Always install these files
  - from: "packages/quickshell"
    to: "$XDG_CONFIG_HOME/quickshell/daifuku"
    mode: "sync"
  # Conditionally install these files
  - from: "packages/dotfiles/.config/fish"
    to: "$XDG_CONFIG_HOME/fish"
    mode: "sync"
    excludes: ["conf.d"]
    condition:
      type: "shell"
      value: "fish"
  - from: "packages/dotfiles/.config/zshrc.d"
    to: "$XDG_CONFIG_HOME/zshrc.d"
    mode: "sync"
    condition:
      type: "shell"
      value: "zsh"
  - from: "packages/dotfiles/.config/foot"
    to: "$XDG_CONFIG_HOME/foot"
    mode: "sync"
    condition:
      type: "terminal"
      value: "foot"
  - from: "packages/dotfiles/.config/kitty"
    to: "$XDG_CONFIG_HOME/kitty"
    mode: "sync"
    condition:
      type: "terminal"
      value: "kitty"
  # Hyprland    
  - from: "packages/dotfiles/.config/hypr"
    to: "$XDG_CONFIG_HOME/hypr"
    mode: "sync"
    excludes: ["custom", "hyprlock.conf", "hypridle.conf", "hyprland.conf"]
  # Hyprland special files
  - from: "packages/dotfiles/.config/hypr/hyprland.conf"
    to: "$XDG_CONFIG_HOME/hypr/hyprland.conf"
    mode: "hard-backup"
  - from: "packages/dotfiles/.config/hypr/hypridle.conf"
    to: "$XDG_CONFIG_HOME/hypr/hypridle.conf"
    mode: "soft-backup"
  - from: "packages/dotfiles/.config/hypr/hyprlock.conf"
    to: "$XDG_CONFIG_HOME/hypr/hyprlock.conf"
    mode: "soft-backup"
  - from: "packages/dotfiles/.config/hypr/custom"
    to: "$XDG_CONFIG_HOME/hypr/custom"
    mode: "skip-if-exists"
  - from: "packages/dotfiles/.local/share/icons"
    to: "$XDG_DATA_HOME/icons"
    mode: "soft"
  - from: "packages/dotfiles/.local/share/konsole"
    to: "$XDG_DATA_HOME/konsole"
    mode: "soft"
  # Fontconfig (default - fontsets handled separately if FONTSET_DIR_NAME is set)
  - from: "packages/dotfiles/.config/fontconfig"
    to: "$XDG_CONFIG_HOME/fontconfig"
    mode: "sync"
  # MISC config directories (other .config directories)
  - from: "packages/dotfiles/.config/fuzzel"
    to: "$XDG_CONFIG_HOME/fuzzel"
    mode: "sync"
  - from: "packages/dotfiles/.config/kde-material-you-colors"
    to: "$XDG_CONFIG_HOME/kde-material-you-colors"
    mode: "sync"
  - from: "packages/dotfiles/.config/Kvantum"
    to: "$XDG_CONFIG_HOME/Kvantum"
    mode: "sync"
  - from: "packages/dotfiles/.config/matugen"
    to: "$XDG_CONFIG_HOME/matugen"
    mode: "sync"
  - from: "packages/dotfiles/.config/mpv"
    to: "$XDG_CONFIG_HOME/mpv"
    mode: "sync"
  - from: "packages/dotfiles/.config/qt5ct"
    to: "$XDG_CONFIG_HOME/qt5ct"
    mode: "sync"
  - from: "packages/dotfiles/.config/qt6ct"
    to: "$XDG_CONFIG_HOME/qt6ct"
    mode: "sync"
  - from: "packages/dotfiles/.config/wlogout"
    to: "$XDG_CONFIG_HOME/wlogout"
    mode: "sync"
  - from: "packages/dotfiles/.config/xdg-desktop-portal"
    to: "$XDG_CONFIG_HOME/xdg-desktop-portal"
    mode: "sync"
  # MISC config files (individual files in .config)
  - from: "packages/dotfiles/.config/chrome-flags.conf"
    to: "$XDG_CONFIG_HOME/chrome-flags.conf"
    mode: "soft"
  - from: "packages/dotfiles/.config/code-flags.conf"
    to: "$XDG_CONFIG_HOME/code-flags.conf"
    mode: "soft"
  - from: "packages/dotfiles/.config/darklyrc"
    to: "$XDG_CONFIG_HOME/darklyrc"
    mode: "soft"
  - from: "packages/dotfiles/.config/dolphinrc"
    to: "$XDG_CONFIG_HOME/dolphinrc"
    mode: "soft"
  - from: "packages/dotfiles/.config/kdeglobals"
    to: "$XDG_CONFIG_HOME/kdeglobals"
    mode: "soft"
  - from: "packages/dotfiles/.config/konsolerc"
    to: "$XDG_CONFIG_HOME/konsolerc"
    mode: "soft"
  - from: "packages/dotfiles/.config/starship.toml"
    to: "$XDG_CONFIG_HOME/starship.toml"
    mode: "soft"
  - from: "packages/dotfiles/.config/thorium-flags.conf"
    to: "$XDG_CONFIG_HOME/thorium-flags.conf"
    mode: "soft"
